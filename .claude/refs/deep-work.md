# Deep Work Loop â€” ë°˜ë³µ ì •ì œ í”„ë¡œí† ì½œ

PMì´ ì—ì´ì „íŠ¸ íŒ€ì„ ë°˜ë³µ íˆ¬ì…í•˜ì—¬ ìµœê³  í’ˆì§ˆì˜ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚´ëŠ” í”„ë¡œí† ì½œ.
ë§¤ iterationë§ˆë‹¤ Researcherâ†’Developerâ†’Reviewerâ†’Tester 4ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©° í’ˆì§ˆì„ ë†’ì¸ë‹¤.

## íŠ¸ë¦¬ê±° â€” 2ê°€ì§€ ê²½ë¡œ

### A. ì‚¬ìš©ì ëª…ì‹œ ìš”ì²­ (í‚¤ì›Œë“œ)
ë‹¤ìŒ í‚¤ì›Œë“œê°€ í¬í•¨ëœ ì‘ì—… ìš”ì²­ ì‹œ ì¦‰ì‹œ Deep Work ëª¨ë“œ ì§„ì…:
- "ë”¥ì›Œí¬", "deep work", "ëê¹Œì§€ ëŒë ¤", "ë°˜ë³µí•´ì„œ ì™„ì„±í•´", "ìµœê³  í’ˆì§ˆë¡œ", "ì™„ë²½í•˜ê²Œ"

### B. PM ìë™ ì œì•ˆ (ë³µì¡ë„ ê°ì§€)
PMì´ ì‘ì—…ì„ ë¶„ì„í•œ ê²°ê³¼ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì— í•´ë‹¹í•˜ë©´ **ë”¥ì›Œí¬ë¥¼ ë¨¼ì € ì œì•ˆ**í•œë‹¤:

| ê°ì§€ ì‹ í˜¸ | ì˜ˆì‹œ |
|-----------|------|
| **ë‹¤ë‹¨ê³„ êµ¬í˜„** | "ì¸ì¦ ì‹œìŠ¤í…œ ë§Œë“¤ì–´ì¤˜" â€” ì„¤ê³„+êµ¬í˜„+í…ŒìŠ¤íŠ¸+ë³´ì•ˆ ê²€ì¦ í•„ìš” |
| **ì—¬ëŸ¬ íŒŒì¼ ìˆ˜ì •** | 5ê°œ ì´ìƒ íŒŒì¼ì— ê±¸ì¹œ ë³€ê²½ì´ ì˜ˆìƒë  ë•Œ |
| **í’ˆì§ˆì´ í•µì‹¬** | "í”„ë¡œë•ì…˜ì— ë°°í¬í•  ê±°ì•¼", "ì™„ì„±ë„ ë†’ê²Œ" |
| **ë°˜ë³µ ì •ì œê°€ í•„ìš”** | ë¦¬íŒ©í† ë§, ì„±ëŠ¥ ìµœì í™”, UX ê°œì„  ë“± í•œ ë²ˆì— ëë‚˜ê¸° ì–´ë ¤ìš´ ì‘ì—… |
| **ì´ì „ì— ì‹¤íŒ¨í•œ ì‘ì—… ì¬ì‹œë„** | ê°™ì€ ì‘ì—…ì„ ë‹¤ì‹œ ìš”ì²­í•  ë•Œ |

**ì œì•ˆ ë°©ì‹** (ìì—°ìŠ¤ëŸ½ê²Œ):
```
ì´ ì‘ì—…ì€ ì¢€ ë³µì¡í•´ì„œ ë”¥ì›Œí¬ë¡œ ë°˜ë³µ ì •ì œí•˜ë©´ í›¨ì”¬ ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¬ ê²ƒ ê°™ì•„.
10íšŒ ë°˜ë³µì„ ì¶”ì²œí•˜ëŠ”ë°, ë”¥ì›Œí¬ë¡œ ì§„í–‰í• ê¹Œ? ì•„ë‹ˆë©´ ì¼ë°˜ ëª¨ë“œë¡œ í• ê¹Œ?
```

- ì‚¬ìš©ìê°€ ìˆ˜ë½ â†’ ë”¥ì›Œí¬ ì‹œì‘ (íšŸìˆ˜ í˜‘ìƒ ì§„í–‰)
- ì‚¬ìš©ìê°€ ê±°ì ˆ ("ê·¸ëƒ¥ í•´", "ì¼ë°˜ìœ¼ë¡œ") â†’ ê¸°ì¡´ ê³„íšâ†’ì‹¤í–‰ ëª¨ë“œë¡œ ì§„í–‰
- **ê°•ìš”í•˜ì§€ ì•ŠëŠ”ë‹¤** â€” í•œ ë²ˆ ì œì•ˆí•˜ê³ , ê±°ì ˆí•˜ë©´ ë°”ë¡œ ë„˜ì–´ê°„ë‹¤

## ì‹œì‘ í”„ë¡œí† ì½œ

1. **ì‘ì—… íŒŒì•…** â€” ë¬´ì—‡ì„ ë°˜ë³µ ì •ì œí• ì§€ ëª…í™•íˆ í•œë‹¤
2. **iteration íšŸìˆ˜ í˜‘ìƒ**:
   - PMì´ ì¶”ì²œ: "ì´ ì‘ì—…ì€ **10íšŒ ë°˜ë³µ**ì„ ì¶”ì²œí•˜ëŠ”ë°, ëª‡ íšŒë¡œ í• ê¹Œìš”?"
   - ì‚¬ìš©ìê°€ ìˆ«ì ì§€ì • â†’ ê·¸ëŒ€ë¡œ ì ìš©
   - "ì ë‹¹íˆ" / "ì•Œì•„ì„œ" â†’ 10íšŒ
   - "ì ê²Œ" / "ë¹ ë¥´ê²Œ" â†’ 5íšŒ
3. **ì´ˆê¸°í™”**:
   ```python
   from heysquid.skills.deep_work import start_loop
   state = start_loop(task="ì‘ì—… ì„¤ëª…", max_iterations=N, plan="ê³„íš ìš”ì•½")
   ```
4. **ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸**:
   ```python
   from heysquid.dashboard import set_current_task, add_mission_log
   set_current_task(f"Deep Work [0/{N}] â€” {task}")
   add_mission_log("pm", f"Deep Work ì‹œì‘: {task} ({N}íšŒ ë°˜ë³µ)")
   ```

## ë°˜ë³µ ë£¨í”„ (iteration 1 ~ N)

ê° iterationì—ì„œ 4ê°œ phaseë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰:

### Phase 1: Research (ğŸ™ Researcher)
- **ì²« iteration**: í˜„ì¬ ì½”ë“œ/ìƒí™© ë¶„ì„, ìš”êµ¬ì‚¬í•­ ì •ë¦¬
- **ì´í›„ iteration**: ì´ì „ ë¦¬ë·° í”¼ë“œë°± ë¶„ì„ + ê°œì„  ë°©í–¥ ì¡°ì‚¬
- ì´ì „ iterationì—ì„œ ì‹¤íŒ¨í•œ ì´ìŠˆê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ìš°ì„  ë¶„ì„
  ```python
  from heysquid.skills.deep_work import get_failed_issues
  issues = get_failed_issues(iteration - 1)  # ì´ì „ iteration ì´ìŠˆ
  ```

### Phase 2: Develop (ğŸ¦ˆ Developer)
- Researcher ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ êµ¬í˜„/ìˆ˜ì •
- ì´ì „ iterationì˜ reviewer í”¼ë“œë°±ì„ ë°˜ë“œì‹œ ë°˜ì˜

### Phase 3: Review (ğŸ¢ Reviewer)
- Developer ê²°ê³¼ë¬¼ ì½”ë“œ ë¦¬ë·°
- passed=True: í’ˆì§ˆ OK, passed=False: issuesì— êµ¬ì²´ì  ë¬¸ì œì  ê¸°ë¡

### Phase 4: Test (ğŸ¡ Tester)
- í…ŒìŠ¤íŠ¸ ì‹¤í–‰, ë¹Œë“œ í™•ì¸, ë¦°íŠ¸ ì²´í¬
- passed=True: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼, passed=False: ì‹¤íŒ¨ í•­ëª© ê¸°ë¡

### Phase ê²°ê³¼ ê¸°ë¡

ê° phase ì™„ë£Œ ì‹œ:
```python
from heysquid.skills.deep_work import record_iteration
from heysquid.dashboard import dispatch_agent, recall_agent

# ì—ì´ì „íŠ¸ ë°°ì¹˜
dispatch_agent('researcher', 'deep_work', f'[{i}/{N}] ë¶„ì„ ì¤‘...')

# (ì—ì´ì „íŠ¸ ì‘ì—… ì‹¤í–‰)

# ê²°ê³¼ ê¸°ë¡
record_iteration(i, 'research', 'researcher', 'ê²°ê³¼ ìš”ì•½', passed=True)
recall_agent('researcher', f'[{i}/{N}] ë¶„ì„ ì™„ë£Œ')
```

### Quality Gate

4ê°œ phase ëª¨ë‘ ì™„ë£Œ í›„:
```python
from heysquid.skills.deep_work import check_quality_gate, set_iteration_summary
gate = check_quality_gate(i)
set_iteration_summary(i, "ì´ë²ˆ iteration ìš”ì•½")
```

## ì¤‘ê°„ ë³´ê³ 

**ë§¤ 3íšŒë§ˆë‹¤** ë˜ëŠ” **ì¤‘ìš” ì´ìŠˆ ë°œê²¬ ì‹œ** í…”ë ˆê·¸ë¨ìœ¼ë¡œ ì§„í–‰ ë³´ê³ :
```
Deep Work [{i}/{N}] ì™„ë£Œ
âœ… í†µê³¼: research, develop, test
âŒ ì‹¤íŒ¨: review â€” [êµ¬ì²´ì  ì´ìŠˆ]
â†’ ë‹¤ìŒ iterationì—ì„œ ìˆ˜ì • ì˜ˆì •
```

ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸:
```python
set_current_task(f"Deep Work [{i}/{N}] â€” {task}")
```

## ì¡°ê¸° ì¢…ë£Œ ì¡°ê±´

1. **3íšŒ ì—°ì† ëª¨ë“  gate í†µê³¼** â€” ë” ì´ìƒ ê°œì„  ì—¬ì§€ ì—†ìŒ
   ```python
   from heysquid.skills.deep_work import should_early_exit
   if should_early_exit():
       # ì¡°ê¸° ì¢…ë£Œ â†’ finish_loop()
   ```
2. **ì‚¬ìš©ì ì¤‘ë‹¨** â€” "ë©ˆì¶°", "ìŠ¤íƒ‘", "ì¤‘ë‹¨"
   ```python
   from heysquid.skills.deep_work import abort_loop
   abort_loop("ì‚¬ìš©ì ì¤‘ë‹¨")
   ```

## ìµœì¢… ë¦¬í¬íŠ¸

ë£¨í”„ ì™„ë£Œ ì‹œ (ì •ìƒ ì¢…ë£Œ ë˜ëŠ” ì¡°ê¸° ì¢…ë£Œ):
```python
from heysquid.skills.deep_work import finish_loop
finish_loop("ìµœì¢… ìš”ì•½: ...")
```

í…”ë ˆê·¸ë¨ìœ¼ë¡œ ìµœì¢… ë¦¬í¬íŠ¸ ì „ì†¡:
```
Deep Work ì™„ë£Œ! [{completed}/{N}íšŒ ë°˜ë³µ]

ğŸ“‹ ì‘ì—…: {task}
âœ… í†µê³¼ìœ¨: {pass_rate}%
ğŸ”‘ í•µì‹¬ ê°œì„ : ...
ğŸ“ ë³€ê²½ íŒŒì¼: ...
```

## í¬ë˜ì‹œ ë³µêµ¬

PMì´ ìƒˆ ì„¸ì…˜ì—ì„œ ì‹œì‘í•  ë•Œ:
```python
from heysquid.skills.deep_work import get_state
state = get_state()
if state and state.get("active"):
    # ì´ì „ Deep Workê°€ ì¤‘ë‹¨ë¨ â†’ ì´ì–´ì„œ ì§„í–‰
    # state["current_iteration"]ë¶€í„° ì¬ê°œ
```

ì´ë¯¸ ì™„ë£Œëœ iterationì€ ê±´ë„ˆë›°ê³ , ì¤‘ë‹¨ëœ iterationë¶€í„° ì¬ì‹œì‘.

## ì£¼ì˜ì‚¬í•­

- Deep Work ì¤‘ì—ë„ ëŒ€ê¸° ë£¨í”„ëŠ” ì •ìƒ ì‘ë™ (ìƒˆ ë©”ì‹œì§€ ê°ì§€ ê°€ëŠ¥)
- ì‚¬ìš©ìê°€ ì¤‘ê°„ì— ë‹¤ë¥¸ ìš”ì²­ì„ í•˜ë©´, Deep Workë¥¼ ì¼ì‹œ ì¤‘ë‹¨í•˜ê³  í•´ë‹¹ ìš”ì²­ ì²˜ë¦¬ í›„ ì´ì–´ê°
- ê° iterationì˜ review í”¼ë“œë°±ì´ **ë‹¤ìŒ iterationì˜ í•µì‹¬ ì…ë ¥** â€” ë°˜ë“œì‹œ ì „ë‹¬
- ì—ì´ì „íŠ¸ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì€ ê¸°ì¡´ `agent-team.md`ì™€ ë™ì¼ (ì‹¤íŒ¨ ì‹œ ëª¨ë¸ ìŠ¹ê²©)
